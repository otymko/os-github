# Взаимодействие с API GitHub

Библиотека упрощает взаимодействие с GitHub API из OneScript.

## Установка

### OPM

В консоли выполняем:
```
opm install github
```
### Из файла

Качаем последний релиз со страницы Релизы. Затем из командной строки:
```
opm install -f github*.ospx
```

## Примеры

### Авторизация

Авторизация выполняется по token github. О процедуре получения токена можно почитать [тут](https://github.com/settings/tokens).

```bsl
#Использовать github

Токен = "какой-то-токен";
Клиент = Новый КлиентGitHub(Токен);
```

### Пользователь

Доступные поля:
* Логин
* Идентификатор
* Ссылка
* Имя
* Компания
* Местоположение
* ЭлектроннаяПочта
* Инфо
* Репозиториев
* Подписчиков
* Подписок
* ДатаСоздания
* ДатаОбновления


```bsl
ИмяПользователя = "mylogin";
Пользователь = Клиент.ПолучитьПользователя(ИмяПользователя);
```
или
```bsl
ИмяПользователя = "mylogin";
Пользователь = Клиент.ПолучитьПользователя(Новый ПользовательGitHub(ИмяПользователя));
```

### Организация

Достуные поля:
* Логин
* Идентификатор
* Ссылка
* Описание
* Имя
* Компания
* Блог
* Местоположение
* ЭлектроннаяПочта
* Подтверждено
* Репозиториев
* ДатаСоздания
* ДатаОбновления
* Разрешения (для репозиториев)
    - Администрирование
    - Отправка
    - Получение

```bsl
ИмяОрганизации = "myorg";
Организация = Клиент.ПолучитьОрганизацию(ИмяОрганизации);
```
или
```bsl
ИмяОрганизации = "myorg";
Организация = Клиент.ПолучитьОрганизацию(Новый ОрганизацияGitHub(ИмяОрганизации));
```

### Репозиторий

Доступные поля:
* Идентификатор
* Имя
* ПолноеИмя
* Закрытий
* Владелец
* Ссылка
* Описание
* ЭтоФорк
* ДатаСоздания
* ДатаОбновления
* ДатаПуша
* СсылкаHTML
* СсылкаGit
* СсылкаSSH
* Размер
* Язык
* Лицензия
* Форки
* ВеткаПоУмолчания
* Архивный

```bsl
ИмяВладельца = "freeCodeCamp"; // пользователь или организация
ИмяРепозитория = "freeCodeCamp";
Репозиторий = Клиент.ПолучитьРепозиторий(ИмяВладельца, ИмяРепозитория);
```
или
```bsl
Владелец = Новый ОрганизацияGitHub("freeCodeCamp");
ИмяРепозитория = "freeCodeCamp";
Репозиторий = Клиент.ПолучитьРепозиторий(Владелец, ИмяРепозитория);
```
или
```bsl
Репозиторий = Клиент.ПолучитьРепозиторий(Новый РепозиторийGitHub("freeCodeCamp/freeCodeCamp"));
```

### Сотрудники репозитория

Для получения сотрудников (collaborators) репозитория:

```bsl
Владелец = "oscript-library";
Репозиторий = "add";
Сотрудники = Клиент.ПолучитьСотрудниковРепозитория(Владелец, Репозиторий);
```

В результате будет получен массив `ПользовательGitHub` с разрешениями.

### Навигатор репозиториев

Для получения списка репозиториев пользователя / организации используется `НавигаторРепозиториев`.

```bsl
Владелец = Клиент.ПолучитьОрганизацию(Новый ОрганизацияGitHub("oscript-library"));
Навигатор = Новый НавигаторРепозиториев(Владелец);
Результат = Навигатор.ПолучитьВесьСписок(Клиент);
```
Будет получен массив репозиториев (весь список).

```bsl
Владелец = Клиент.ПолучитьОрганизацию(Новый ОрганизацияGitHub("oscript-library"));
Навигатор = Новый НавигаторРепозиториев(Владелец);
Пока Навигатор.ПолучитьСледующие() Цикл
    Сообщить(Навигатор.Репозитории.Количество());
КонецЦикла;
```

Для получения списка репозитория постранично.

### Контент

Доступные поля:
* Тип
* Имя
* Размер
* Кодировка
* Путь
* Хеш
* Ссылка
* СсылкаДляСкачивания

```bsl
Репозиторий = Новый РепозиторийGitHub("freeCodeCamp/freeCodeCamp");
Контент = Клиент.ПолучитьКонтент(Репозиторий, "readme");
```

### Действия с репозиториями

Для создания форка репозитория в организацию

```bsl
#Использовать github

Токен = "какой-то-токен";
Клиент = Новый КлиентGitHub(Токен);
КлиентGitHub.СоздатьФоркВОрганизацию("freeCodeCamp", "freeCodeCamp", "oscript-library");
```

Для предоставления доступа другому пользователю к репозиторию

```bsl
#Использовать github

Токен = "какой-то-токен";
Клиент = Новый КлиентGitHub(Токен);
КлиентGitHub.ПредоставитьДоступКРепозиторию("oscript-library", "freeCodeCamp", "какой-то-пользователь", "push");
```
